var syncRequest = require('sync-request');

module.exports = {
    import: function(yapi) {
        var res = syncRequest('POST', yapi.config.contextRoot + '/import', {
            body: "BBXSRF=" + yapi.config.xhrequest.headers.xbbxsrf + "&portals%5Bdashboard%5D.importIt=true&_portals%5Bdashboard%5D.importIt=on&portals%5Bdashboard%5D.deleteIt=true&_portals%5Bdashboard%5D.deleteIt=on&importGroupsFlag=true&_importGroupsFlag=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-p2p.xml%5D%5Bwidget-p2p-tab%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-p2p.xml%5D%5Bwidget-p2p-tab%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-p2p.xml%5D%5Bwidget-p2p-transactions%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-p2p.xml%5D%5Bwidget-p2p-transactions%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-p2p.xml%5D%5Bwidget-p2p-enrollment%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-p2p.xml%5D%5Bwidget-p2p-enrollment%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-p2p.xml%5D%5Bwidget-p2p-preferences%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-p2p.xml%5D%5Bwidget-p2p-preferences%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-ebilling.xml%5D%5Bwidget-e-bill-inbox%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-ebilling.xml%5D%5Bwidget-e-bill-inbox%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-ebilling.xml%5D%5Bwidget-e-bill-history%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-ebilling.xml%5D%5Bwidget-e-bill-history%5D=on&serverItems%5Bbackbase.com.2012.aurora%2Ftemplate-widgets.xml%5D%5BStandard_Widget%5D=true&_serverItems%5Bbackbase.com.2012.aurora%2Ftemplate-widgets.xml%5D%5BStandard_Widget%5D=on&serverItems%5Bbackbase.com.2012.aurora%2Ftemplate-widgets.xml%5D%5BW3C_Widget%5D=true&_serverItems%5Bbackbase.com.2012.aurora%2Ftemplate-widgets.xml%5D%5BW3C_Widget%5D=on&serverItems%5Blaunchpad%2Ftemplate-pages.xml%5D%5BLaunchpadPageTemplate%5D=true&_serverItems%5Blaunchpad%2Ftemplate-pages.xml%5D%5BLaunchpadPageTemplate%5D=on&serverItems%5Bbackbase.com.2011.spitfire%2Ftemplate-pages.xml%5D%5BdashboardPageTemplate%5D=true&_serverItems%5Bbackbase.com.2011.spitfire%2Ftemplate-pages.xml%5D%5BdashboardPageTemplate%5D=on&serverItems%5Bbackbase.com.2013.aurora%2Fcatalog-containers-adminDesignerOnly.xml%5D%5BManageable_Area_Closure%5D=true&_serverItems%5Bbackbase.com.2013.aurora%2Fcatalog-containers-adminDesignerOnly.xml%5D%5BManageable_Area_Closure%5D=on&serverItems%5Bbackbase.com.2012.aurora%2Ftemplate-containers.xml%5D%5BColumn_table%5D=true&_serverItems%5Bbackbase.com.2012.aurora%2Ftemplate-containers.xml%5D%5BColumn_table%5D=on&serverItems%5Bbackbase.com.2012.aurora%2Ftemplate-containers.xml%5D%5BBorder_table%5D=true&_serverItems%5Bbackbase.com.2012.aurora%2Ftemplate-containers.xml%5D%5BBorder_table%5D=on&serverItems%5Bbackbase.com.2012.aurora%2Ftemplate-containers.xml%5D%5BWrap_Line_float%5D=true&_serverItems%5Bbackbase.com.2012.aurora%2Ftemplate-containers.xml%5D%5BWrap_Line_float%5D=on&serverItems%5Bbackbase.com.2012.aurora%2Ftemplate-containers.xml%5D%5BBox%5D=true&_serverItems%5Bbackbase.com.2012.aurora%2Ftemplate-containers.xml%5D%5BBox%5D=on&serverItems%5Bbackbase.com.2012.aurora%2Ftemplate-containers.xml%5D%5BAbsColumn%5D=true&_serverItems%5Bbackbase.com.2012.aurora%2Ftemplate-containers.xml%5D%5BAbsColumn%5D=on&serverItems%5Bbackbase.com.2012.aurora%2Ftemplate-containers.xml%5D%5BColumn_table_resizable%5D=true&_serverItems%5Bbackbase.com.2012.aurora%2Ftemplate-containers.xml%5D%5BColumn_table_resizable%5D=on&serverItems%5Bbackbase.com.2012.aurora%2Ftemplate-containers.xml%5D%5BBorder_table_resizable%5D=true&_serverItems%5Bbackbase.com.2012.aurora%2Ftemplate-containers.xml%5D%5BBorder_table_resizable%5D=on&serverItems%5Bbackbase.com.2012.aurora%2Fcatalog-containers-adminDesignerOnly.xml%5D%5BManageable_Area%5D=true&_serverItems%5Bbackbase.com.2012.aurora%2Fcatalog-containers-adminDesignerOnly.xml%5D%5BManageable_Area%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-cards.xml%5D%5Bwidget-card-overview%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-cards.xml%5D%5Bwidget-card-overview%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-cards.xml%5D%5Bwidget-card-details%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-cards.xml%5D%5Bwidget-card-details%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-cards.xml%5D%5Bwidget-card-loyalty%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-cards.xml%5D%5Bwidget-card-loyalty%5D=on&serverItems%5Bbackbase.com.2013.aurora%2Ftemplate-pages.xml%5D%5BBB_Desktop%5D=true&_serverItems%5Bbackbase.com.2013.aurora%2Ftemplate-pages.xml%5D%5BBB_Desktop%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-messaging.xml%5D%5Bwidget-secure-messaging%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-messaging.xml%5D%5Bwidget-secure-messaging%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-advanced-content%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-advanced-content%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-notifications%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-notifications%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-automation%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-automation%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-navfooter%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-navfooter%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-profile-preferences%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-profile-preferences%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-profile-summary%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-profile-summary%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-navbar-advanced%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-navbar-advanced%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-login-multifactor%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-login-multifactor%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-video%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-video%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-login%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-login%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-navbar%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-navbar%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-places%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-places%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-profile-details%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-profile-details%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-profile-contact%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-profile-contact%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-profile-portfolio%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-profile-portfolio%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-catalog%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-universal.xml%5D%5Bwidget-catalog%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-banking.xml%5D%5Bwidget-addressbook%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-banking.xml%5D%5Bwidget-addressbook%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-banking.xml%5D%5Bwidget-review-transfers%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-banking.xml%5D%5Bwidget-review-transfers%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-banking.xml%5D%5Bwidget-expense-planning%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-banking.xml%5D%5Bwidget-expense-planning%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-banking.xml%5D%5Bwidget-transactions%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-banking.xml%5D%5Bwidget-transactions%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-banking.xml%5D%5Bwidget-accounts%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-banking.xml%5D%5Bwidget-accounts%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-banking.xml%5D%5Bwidget-external-accounts%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-banking.xml%5D%5Bwidget-external-accounts%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-banking.xml%5D%5Bwidget-new-transfer%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-banking.xml%5D%5Bwidget-new-transfer%5D=on&serverItems%5B..%2FdefaultImportData%2Ftemplates.xml%5D%5Bportal-default%5D=true&_serverItems%5B..%2FdefaultImportData%2Ftemplates.xml%5D%5Bportal-default%5D=on&serverItems%5B..%2FdefaultImportData%2Ftemplates.xml%5D%5Bpage-default%5D=true&_serverItems%5B..%2FdefaultImportData%2Ftemplates.xml%5D%5Bpage-default%5D=on&serverItems%5B..%2FdefaultImportData%2Ftemplates.xml%5D%5Binclude-default%5D=true&_serverItems%5B..%2FdefaultImportData%2Ftemplates.xml%5D%5Binclude-default%5D=on&serverItems%5B..%2FdefaultImportData%2Ftemplates.xml%5D%5Bwidget-default%5D=true&_serverItems%5B..%2FdefaultImportData%2Ftemplates.xml%5D%5Bwidget-default%5D=on&serverItems%5B..%2FdefaultImportData%2Ftemplates.xml%5D%5Bcontainer-default%5D=true&_serverItems%5B..%2FdefaultImportData%2Ftemplates.xml%5D%5Bcontainer-default%5D=on&serverItems%5B..%2FdefaultImportData%2Ftemplates.xml%5D%5Blink-default%5D=true&_serverItems%5B..%2FdefaultImportData%2Ftemplates.xml%5D%5Blink-default%5D=on&serverItems%5Bbackbase.com.2012.darts%2Fcatalog-containers.xml%5D%5BTargetingContainer%5D=true&_serverItems%5Bbackbase.com.2012.darts%2Fcatalog-containers.xml%5D%5BTargetingContainer%5D=on&serverItems%5Blaunchpad%2Ftemplate-containers.xml%5D%5BLauncherContainer%5D=true&_serverItems%5Blaunchpad%2Ftemplate-containers.xml%5D%5BLauncherContainer%5D=on&serverItems%5Blaunchpad%2Ftemplate-containers.xml%5D%5BLightboxContainer%5D=true&_serverItems%5Blaunchpad%2Ftemplate-containers.xml%5D%5BLightboxContainer%5D=on&serverItems%5Blaunchpad%2Ftemplate-containers.xml%5D%5BDeckContainer%5D=true&_serverItems%5Blaunchpad%2Ftemplate-containers.xml%5D%5BDeckContainer%5D=on&serverItems%5Blaunchpad%2Ftemplate-containers.xml%5D%5BCarouselContainer%5D=true&_serverItems%5Blaunchpad%2Ftemplate-containers.xml%5D%5BCarouselContainer%5D=on&serverItems%5Blaunchpad%2Ftemplate-containers.xml%5D%5BLauncherDeckContainer%5D=true&_serverItems%5Blaunchpad%2Ftemplate-containers.xml%5D%5BLauncherDeckContainer%5D=on&serverItems%5Blaunchpad%2Ftemplate-containers.xml%5D%5BSpringboardContainer%5D=true&_serverItems%5Blaunchpad%2Ftemplate-containers.xml%5D%5BSpringboardContainer%5D=on&serverItems%5Blaunchpad%2Ftemplate-containers.xml%5D%5BPageLayoutContainer%5D=true&_serverItems%5Blaunchpad%2Ftemplate-containers.xml%5D%5BPageLayoutContainer%5D=on&serverItems%5Blaunchpad%2Ftemplate-containers.xml%5D%5BTabs%5D=true&_serverItems%5Blaunchpad%2Ftemplate-containers.xml%5D%5BTabs%5D=on&serverItems%5Blaunchpad%2Ftemplate-containers.xml%5D%5BColumnContainer%5D=true&_serverItems%5Blaunchpad%2Ftemplate-containers.xml%5D%5BColumnContainer%5D=on&serverItems%5Blaunchpad%2Ftemplate-containers.xml%5D%5BPanelContainer%5D=true&_serverItems%5Blaunchpad%2Ftemplate-containers.xml%5D%5BPanelContainer%5D=on&serverItems%5Blaunchpad%2Fcatalog-containers.xml%5D%5Bcarousel-container%5D=true&_serverItems%5Blaunchpad%2Fcatalog-containers.xml%5D%5Bcarousel-container%5D=on&serverItems%5Blaunchpad%2Fcatalog-containers.xml%5D%5Bdeck-container%5D=true&_serverItems%5Blaunchpad%2Fcatalog-containers.xml%5D%5Bdeck-container%5D=on&serverItems%5Blaunchpad%2Fcatalog-containers.xml%5D%5Bcolumn-layout%5D=true&_serverItems%5Blaunchpad%2Fcatalog-containers.xml%5D%5Bcolumn-layout%5D=on&serverItems%5Blaunchpad%2Fcatalog-containers.xml%5D%5Bpanel-container%5D=true&_serverItems%5Blaunchpad%2Fcatalog-containers.xml%5D%5Bpanel-container%5D=on&serverItems%5Blaunchpad%2Fcatalog-containers.xml%5D%5Bspringboard-container%5D=true&_serverItems%5Blaunchpad%2Fcatalog-containers.xml%5D%5Bspringboard-container%5D=on&serverItems%5Blaunchpad%2Fcatalog-containers.xml%5D%5Bpage-layout-container%5D=true&_serverItems%5Blaunchpad%2Fcatalog-containers.xml%5D%5Bpage-layout-container%5D=on&serverItems%5Blaunchpad%2Fcatalog-containers.xml%5D%5Btabs-container%5D=true&_serverItems%5Blaunchpad%2Fcatalog-containers.xml%5D%5Btabs-container%5D=on&serverItems%5Blaunchpad%2Fcatalog-containers.xml%5D%5Blightbox-container%5D=true&_serverItems%5Blaunchpad%2Fcatalog-containers.xml%5D%5Blightbox-container%5D=on&serverItems%5Blaunchpad%2Fcatalog-containers.xml%5D%5Blauncher-deck-container%5D=true&_serverItems%5Blaunchpad%2Fcatalog-containers.xml%5D%5Blauncher-deck-container%5D=on&serverItems%5Bbackbase.com.2012.darts%2Ftemplate-containers.xml%5D%5BTCont%5D=true&_serverItems%5Bbackbase.com.2012.darts%2Ftemplate-containers.xml%5D%5BTCont%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad.xml%5D%5Bwidget-launchpad-base%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad.xml%5D%5Bwidget-launchpad-base%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-pfm.xml%5D%5Bwidget-category-spendings-chart%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-pfm.xml%5D%5Bwidget-category-spendings-chart%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-pfm.xml%5D%5Bwidget-finances%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-pfm.xml%5D%5Bwidget-finances%5D=on&serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-pfm.xml%5D%5Bwidget-saving-goals%5D=true&_serverItems%5Blaunchpad%2Fbundles%2Flaunchpad-pfm.xml%5D%5Bwidget-saving-goals%5D=on&serverItems%5Bbackbase.com.2012.sabre%2Ftemplate-pages.xml%5D%5BbbSmartTemplate%5D=true&_serverItems%5Bbackbase.com.2012.sabre%2Ftemplate-pages.xml%5D%5BbbSmartTemplate%5D=on&serverItems%5Bbackbase.com.2012.sabre%2Ftemplate-pages.xml%5D%5BbbWebTemplate%5D=true&_serverItems%5Bbackbase.com.2012.sabre%2Ftemplate-pages.xml%5D%5BbbWebTemplate%5D=on&serverItems%5Bbackbase.com.2013.aurora%2Ftemplate-containers.xml%5D%5BColumn_Layout%5D=true&_serverItems%5Bbackbase.com.2013.aurora%2Ftemplate-containers.xml%5D%5BColumn_Layout%5D=on&serverItems%5Bbackbase.com.2013.aurora%2Ftemplate-containers.xml%5D%5BWrapLineFloat%5D=true&_serverItems%5Bbackbase.com.2013.aurora%2Ftemplate-containers.xml%5D%5BWrapLineFloat%5D=on&serverItems%5Bbackbase.com.2013.aurora%2Ftemplate-containers.xml%5D%5BDiv_jsp%5D=true&_serverItems%5Bbackbase.com.2013.aurora%2Ftemplate-containers.xml%5D%5BDiv_jsp%5D=on&serverItems%5Bbackbase.com.2013.aurora%2Ftemplate-containers.xml%5D%5BManageableArea%5D=true&_serverItems%5Bbackbase.com.2013.aurora%2Ftemplate-containers.xml%5D%5BManageableArea%5D=on&serverItems%5Bbackbase.com.2013.aurora%2Ftemplate-containers.xml%5D%5BDiv_soy%5D=true&_serverItems%5Bbackbase.com.2013.aurora%2Ftemplate-containers.xml%5D%5BDiv_soy%5D=on&serverItems%5Bbackbase.com.2012.aurora%2Ftemplate-pages.xml%5D%5BPage_Default%5D=true&_serverItems%5Bbackbase.com.2012.aurora%2Ftemplate-pages.xml%5D%5BPage_Default%5D=on",
            headers: {
                'Content-Type': "application/x-www-form-urlencoded",
                'Accept': "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
                'Cookie': yapi.config.xhrequest.headers.cookie
            },
            followRedirects: false
        });
        if (res.statusCode != "302" || res.headers['location'] != yapi.config.contextRoot + "/import") {
            console.log("Import backbase portal - statusCode: " + res.statusCode);
            console.log("Import backbase portal - body: " + res.body);
            console.log("Import backbase portal - location: " + res.headers['location']);
            throw "It seems that the import of the backbase standard portal has failed...";
        }
    }
}
